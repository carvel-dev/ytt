#@ load("@ytt:url", "url")

path_segment:
  test1: #@ url.path_segment_encode("path path/other")
  test2: #@ url.path_segment_decode("path%20path%2Fother")
  test3: #@ url.path_segment_encode("")
  test4: #@ url.path_segment_decode("")

query_param_value:
  test1: #@ url.query_param_value_encode("val val/other")
  test2: #@ url.query_param_value_decode("val+val%2Fother")
  test3: #@ url.query_param_value_encode("")
  test4: #@ url.query_param_value_decode("")

query_params:
  #! keys are sorted
  test1: #@ url.query_params_encode({"y":["2","3"],"x":["1"],"z":[""],"w":[]})
  test2: #@ url.query_params_decode("y=2&x=1&y=3;z")
  test3: #@ url.query_params_encode({"w":[]})
  test4: #@ url.query_params_decode("")

parse_credentials:
  test1: #@ url.extract_username("https://username:password@url.domain:8080")
  test2: #@ url.extract_password("https://username:password@url.domain:8080")
  test3: #@ url.trim_credentials("https://username:password@url.domain:8080")
  test4: #@ url.extract_username("https://url.domain:8080")
  test5: #@ url.extract_password("https://url.domain:8080")
  test6: #@ url.trim_credentials("https://url.domain:8080")
  test7: #@ url.extract_username("https://username@url.domain:8080")
  test8: #@ url.extract_password("https://username@url.domain:8080")
  test9: #@ url.trim_credentials("https://username@url.domain:8080")
+++

path_segment:
  test1: path%20path%2Fother
  test2: path path/other
  test3: ""
  test4: ""
query_param_value:
  test1: val+val%2Fother
  test2: val val/other
  test3: ""
  test4: ""
query_params:
  test1: x=1&y=2&y=3&z=
  test2:
    x:
    - "1"
    "y":
    - "2"
    - "3"
    z:
    - ""
  test3: ""
  test4: {}
parse_credentials:
  test1: username
  test2: password
  test3: https://url.domain:8080
  test4: ""
  test5: ""
  test6: https://url.domain:8080
  test7: username
  test8: ""
  test9: https://url.domain:8080
